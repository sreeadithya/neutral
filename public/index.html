<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>neutral</title>
    <link rel="stylesheet" href="main.css">

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import { 
        getAuth,
        
       } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDiOt7ARoxwb-m-3WEPafn3bUWHv1teeDQ",
        authDomain: "neutral-eb0b1.firebaseapp.com",
        projectId: "neutral-eb0b1",
        storageBucket: "neutral-eb0b1.appspot.com",
        messagingSenderId: "693038549846",
        appId: "1:693038549846:web:19feb0dd9c1483457ca4f7",
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);

      console.log(app)
    </script>

    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/focus@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script src="app.js"></script>

</head>

<body x-data="" @keydown.ctrl.space="document.getElementById('inputArea').style.display='block'; todoInputArea.focus()">

<div x-data="{ todos: [], userInput: ''}" id="inputDiv" >

  <form @submit.prevent="if(userInput.trim().length) todos.push({todo: userInput, completed: false, subtext: '', showSubText: false}); userInput = ''; document.getElementById('inputArea').style.display='none'; focusTodoText = true; focusTodoSubText = false" id="inputArea" style="display: none;" autocomplete="off">
    <input type="text" x-model="userInput" id="todoInputArea">
  </form>


  <template x-data="todos" x-for="todo in todos">
    
    <div>
      <input type="checkbox" value="true" x-model="todo.completed" @click="todo.completed = ! todo.completed; console.log(todos)" >

      <textarea x-text="todo.todo"  x-model="todo.todo" rows="1" @keydown.ctrl.d.prevent="todos = todos.filter((currTodo) => currTodo != todo)"
      @keydown.enter.prevent="todo.showSubText = true"
      ></textarea>
  


      <textarea x-text="todo.subtext" x-model="todo.subtext"
      @keydown.ctrl.d.prevent="todos = todos.filter((currTodo) => currTodo != todo)"
      @keydown.tab.prevent="todo.subtext += '    '"
      x-bind:style="`height: ${todo.subtext.split('\n').length * 3.5}vh`"
      x-init="todo.subtext = ''"
      x-on:input="todo.subtext = $event.target.value"
      x-show="todo.showSubText"
      class="subText"
      @keydown.backspace="if(todo.subtext == '') todo.showSubText=false"
      >
      </textarea>

    </div>


  </template>
  
</div>

</body>
</html